<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Processor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        button {
            margin-top: 10px;
            padding: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h2>Input Data</h2>
    <table id="inputTable">
        <thead>
            <tr>
                <th>ReasonType Alias</th>
                <th>Debit IdentifierType</th>
                <th>Debit IdentifierValue</th>
                <th>Credit IdentifierType</th>
                <th>Credit IdentifierValue</th>
                <th>Amount</th>
                <th>Currency</th>
                <th>Comment</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <select id="reasonTypeSelect"></select>
                </td>
                <td><input type="text" value="ShortCode" readonly></td>
                <td><input type="text" value="00301"></td>
                <td><input type="text" value="ShortCode" readonly></td>
                <td><input type="text" value="TELKOMSEL"></td>
                <td><input type="text" value="18252000000"></td>
                <td><input type="text" value="IDR"></td>
                <td><input type="text" value="0141/MK.03/PC-44/IX/2024"></td>
            </tr>
        </tbody>
    </table>
    <button onclick="processData()">Proses Data</button>
    
    <h2>Output Data</h2>
    <table id="outputTable">
        <thead>
            <tr>
                <th>ReasonType Alias</th>
                <th>Debit IdentifierType</th>
                <th>Debit IdentifierValue</th>
                <th>Credit IdentifierType</th>
                <th>Credit IdentifierValue</th>
                <th>Amount</th>
                <th>Currency</th>
                <th>Comment</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    
    <script>
        // Fetch data from refrensi.json and populate dropdown
        fetch('refrensi.json')
    .then(response => response.json())
    .then(data => {
        console.log(data); // Memastikan data dimuat
        let select = document.getElementById("reasonTypeSelect");
        data.forEach(item => {
            let opt = document.createElement("option");
            opt.value = item["Reason Type"];  // Mengambil "Reason Type"
            opt.textContent = item["Reason Type"]; // Menampilkan "Reason Type" pada dropdown
            select.appendChild(opt);
        });
    })
    .catch(error => {
        console.error('Error loading preferences:', error);
    });

        // Function to process data and populate output table
        function processData() {
            let inputTable = document.getElementById("inputTable").getElementsByTagName("tbody")[0];
            let outputTable = document.getElementById("outputTable").getElementsByTagName("tbody")[0];
            outputTable.innerHTML = ""; // Clear the output table before adding new data

            let row = inputTable.rows[0];
            let reasonTypeAlias = row.cells[0].querySelector("select").value;
            let debitIdentifierType = "ShortCode";
            let debitIdentifierValue = row.cells[2].querySelector("input").value;
            let creditIdentifierType = "ShortCode";
            let creditIdentifierValue = row.cells[4].querySelector("input").value;
            let amount = row.cells[5].querySelector("input").value;
            let currency = row.cells[6].querySelector("input").value;
            let comment = row.cells[7].querySelector("input").value;

            // Insert the data into the output table
            let newRow = outputTable.insertRow();
            newRow.insertCell(0).textContent = reasonTypeAlias;
            newRow.insertCell(1).textContent = debitIdentifierType;
            newRow.insertCell(2).textContent = debitIdentifierValue;
            newRow.insertCell(3).textContent = creditIdentifierType;
            newRow.insertCell(4).textContent = creditIdentifierValue;
            newRow.insertCell(5).textContent = amount;
            newRow.insertCell(6).textContent = currency;
            newRow.insertCell(7).textContent = "Nodin " + comment;
        }
    </script>
</body>
</html>
